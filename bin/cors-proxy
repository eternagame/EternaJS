#!/usr/bin/env bash

require() {
    if [ -z "$(command -v "$1")" ]; then
        echo "'$1' must be in your \$PATH ($2)"
        exit 1
    fi
}

require "devd" "https://github.com/cortesi/devd"

PORT=$1
if [ -z "$PORT" ]; then
    PORT=9001
fi

devd --port="$PORT" --crossdomain               \
    /get/=https://www.eternagame.org/get/       \
    /post/=https://www.eternagame.org/post/     \
    /eterna_authenticate.php=https://www.eternagame.org/eterna_authenticate.php     \
    /login/=https://www.eternagame.org/login/     \
    /eterna_logout.php=https://www.eternagame.org/eterna_logout.php     \
    /banned.list=https://www.eternagame.org/banned.list
