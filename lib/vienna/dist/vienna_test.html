<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>ViennaTest</title>
</head>
<body>
<script src="./vienna.js"></script>
<script>
    console.log('Vienna initializing...');

    function FullFold (name, seq, struct) {
        console.log(`Folding ${name}...`);

        let t0 = performance.now();
        let fullFoldResult = vienna.FullFoldDefault(seq, struct);
        let t1 = performance.now();

        console.log(`${name} complete! (${t1 - t0}ms)`);

        fullFoldResult.delete();
    }

    function FullFoldTemperature (name, seq, struct, temp) {
        console.log(`FullFoldTemperature ${name}...`);

        let t0 = performance.now();
        let result = vienna.FullFoldTemperature(temp, seq, struct);
        let t1 = performance.now();

        console.log(`${name} complete! (${t1 - t0}ms)`);

        result.delete();
    }

    // If noInitialRun is _false_, main() will be automatically called after
    // our promise resolves. Instead, we call it manually as the first statement
    // in the callback.
    vienna({noInitialRun: true}).then(function(vienna) {
        window.vienna = vienna;

        console.log('Vienna intialized');

        // http://www.eternagame.org/web/puzzle/8284172/
        const MINILOOP_SEQ = 'UAAAAAAG';
        const MINILOOP_STRUCT = '((....))';

        // http://www.eternagame.org/web/puzzle/13833/
        const SNOWFLAKE_SEQ = 'GUGGACAAGAUGAAACAUCAGUAACAAGCGCAAAGCGCGGGCAAAGCCCCCGGAAACCGGAAGUUACAGAACAAAGUUCAAGUUUACAAGUGGACAAGUUGAAACAACAGUUACAAGACGAAACGUCGGCCAAAGGCCCCAUAAAAUGGAAGUAACACUUGAAACAAGAAGUUUACAAGUUGACAAGUUCAAAGAACAGUUACAAGUGGAAACCACGCGCAAAGCGCCUCCAAAGGAGAAGUAACAGAAGAAACUUCAAGUUAGCAAGUGGUCAAGUACAAAGUACAGUAACAACAUCAAAGAUGGCGCAAAGCGCGAGCAAAGCUCAAGUUACAGAACAAAGUUCAAGAUUACAAGAGUGCAAGAAGAAACUUCAGAUAGAACUGCAAAGCAGCACCAAAGGUGGGGCAAAGCCCAACUAUCAGUUGAAACAACAAGUAUUCAAGAGGUCAAGAUCAAAGAUCAGUAACAAGUGCAAAGCACGGGCAAAGCCCGACCAAAGGUCAAGUUACAGUUCAAAGAACAAGAUUUC';

        const SNOWFLAKE_STRUCT = '((((((..((((...)))).(((((..((((...))))((((...))))((((...))))..))))).((((...))))..))))))..((((((..((((...)))).(((((..((((...))))((((...))))((((...))))..))))).((((...))))..))))))..((((((..((((...)))).(((((..((((...))))((((...))))((((...))))..))))).((((...))))..))))))..((((((..((((...)))).(((((..((((...))))((((...))))((((...))))..))))).((((...))))..))))))..((((((..((((...)))).(((((..((((...))))((((...))))((((...))))..))))).((((...))))..))))))..((((((..((((...)))).(((((..((((...))))((((...))))((((...))))..))))).((((...))))..))))))';

        FullFold('Miniloop', MINILOOP_SEQ, MINILOOP_STRUCT);
        FullFold('Snowflake', SNOWFLAKE_SEQ, SNOWFLAKE_STRUCT);
        FullFold('EmptyStructure', "AAAAAAAAAAAAAA", "", 37);
        console.log('Done!');
    });
</script>
</body>
</html>
